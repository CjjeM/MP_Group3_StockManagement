@model IEnumerable<MP_Group3_StockManagement.Models.Supplier>

@{
    ViewBag.Title = "Supplier List";
}

<h2>Supplier List</h2>

<p>
    @Html.ActionLink("Add Supplier", "AddSupplier")
</p>

@using (Html.BeginForm("Index", "Supplier", FormMethod.Get))
{
    <div class="input-group">
        @Html.TextBox("search", "", new { @class = "form-control", @placeholder = "Search Supplier" })
        <div class="input-group-append">
            <input type="submit" value="Search" class="btn btn-secondary" />
        </div>
    </div>
}

<br />
<table id="SupplierTable" class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.SupplierID)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.SupplierName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.SupplierAddress)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.SupplierContact)
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
        using (Html.BeginForm("DeleteSupplier", "Supplier", new { id = item.SupplierID }))
        {
            <tr id="@item.SupplierID">
                <td>
                    @Html.DisplayFor(modelItem => item.SupplierID)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.SupplierName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.SupplierAddress)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.SupplierContact)
                </td>
                <td>
                    @Html.ActionLink("Edit", "EditSupplier", new { id = item.SupplierID }, new { @class = "btn btn-secondary" }) |

                    @Html.ActionLink("Details", "Details", new { id = item.SupplierID }, new { @class = "btn btn-info" }) |

                    <input type="submit" value="Delete" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete the supplier: @item.SupplierName?')" />
                </td>
            </tr>
        }

    }

</table>

@*<input type="hidden" id="hiddenSupplierID" />

<script>
    var ConfirmDelete = function (SupplierID) {
        $('#hiddenSupplierID').val(SupplierID);
        $("#deleteModal").modal('show');
    }

    var DeleteSupplier = function () {
        var supplierID = $('#hiddenSupplierID').val();

        $.ajax({
            type: "POST",
            url: "@Url.Action("Delete")",
            data: { SupplierID: JSON.stringify(supplierID) },
            dataType: "JSON",
            success: function (result) {
                $("#deleteModal").modal('hide');
                $("#row_" + supplierID).remove();
            }

        });
    }
</script>*@

@section Scripts {
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap")
}


<!--<div id="deleteModal" class="modal fade">
    <div class="modal-dialog">-->
        <!-- Modal content-->
        <!--<div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Confirm Delete</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to delete?</p>
            </div>
            <div class="modal-footer">
                <a href="#" id="btnDelete" class="btn btn-danger" onclick="DeleteSupplier()">Delete</a>
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>--> 